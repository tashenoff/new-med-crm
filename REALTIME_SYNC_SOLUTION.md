# –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É CRM –∏ HMS

## üö® –ü—Ä–æ–±–ª–µ–º–∞
–í HMS –≤ —Ä–∞–∑–¥–µ–ª–µ "–ü–∞—Ü–∏–µ–Ω—Ç—ã" –Ω—É–∂–Ω–æ –±—ã–ª–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É, —á—Ç–æ–±—ã –ø–æ—è–≤–∏–ª—Å—è –∫–ª–∏–µ–Ω—Ç, –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–∑ CRM.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏ CRM –∏ HMS —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º React Context.

### –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ:

#### 1. –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Ö—É–∫ `useGlobalRefresh.js`
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ –¥–∞–Ω–Ω—ã—Ö
- –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π (–ø–∞—Ü–∏–µ–Ω—Ç—ã, –∑–∞–ø–∏—Å–∏, –≤—Ä–∞—á–∏, –∫–ª–∏–µ–Ω—Ç—ã CRM –∏ —Ç.–¥.)
- –£–¥–æ–±–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

```javascript
const { refreshPatients, refreshAllHMS } = useGlobalRefresh();
refreshPatients(); // –û–±–Ω–æ–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ HMS
```

#### 2. –û–±–Ω–æ–≤–ª–µ–Ω `ClientsView.js` (CRM)
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `useGlobalRefresh`
- –í —Ñ—É–Ω–∫—Ü–∏–∏ `handleConvertToHMS` –¥–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `refreshPatients()`
- –¢–µ–ø–µ—Ä—å –ø–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞ –≤ –ø–∞—Ü–∏–µ–Ω—Ç–∞ HMS –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤

#### 3. –û–±–Ω–æ–≤–ª–µ–Ω `App.jsx`
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `GlobalRefreshProvider`
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–±–µ—Ä–Ω—É—Ç–æ –≤ `GlobalRefreshProvider`
- –í `ClinicApp` –¥–æ–±–∞–≤–ª–µ–Ω—ã useEffect —Ö—É–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–ª—É—à–∞—é—Ç —Ç—Ä–∏–≥–≥–µ—Ä—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `refreshTriggers.patients` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `fetchPatients()`

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞ –≤ CRM –≤ –ø–∞—Ü–∏–µ–Ω—Ç–∞ HMS**
2. **–í `handleConvertToHMS` –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ API –∑–∞–ø—Ä–æ—Å–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `refreshPatients()`**
3. **–ì–ª–æ–±–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á–µ—Ç—á–∏–∫ `refreshTriggers.patients`**
4. **–í `App.jsx` —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `useEffect`, –∫–æ—Ç–æ—Ä—ã–π —Å–ª—É—à–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ —Ç—Ä–∏–≥–≥–µ—Ä–∞**
5. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `fetchPatients()` –∏ —Å–ø–∏—Å–æ–∫ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è:

- ‚úÖ **–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** - –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
- ‚úÖ **–û—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—Ä–∞–∑—É –≤–∏–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥—Ä—É–≥–∏—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π
- ‚úÖ **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** - —Å–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –¥—Ä—É–≥–∏—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- ‚úÖ **–û—Ç–ª–∞–¥–∫–∞** - –¥–æ–±–∞–≤–ª–µ–Ω—ã console.log –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π:
- `refreshPatients()` - –ø–∞—Ü–∏–µ–Ω—Ç—ã HMS
- `refreshAppointments()` - –∑–∞–ø–∏—Å–∏ HMS
- `refreshDoctors()` - –≤—Ä–∞—á–∏ HMS
- `refreshCrmClients()` - –∫–ª–∏–µ–Ω—Ç—ã CRM
- `refreshCrmLeads()` - –∑–∞—è–≤–∫–∏ CRM
- `refreshCrmDeals()` - —Å–¥–µ–ª–∫–∏ CRM
- `refreshAllHMS()` - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ HMS —Å—Ä–∞–∑—É
- `refreshAllCRM()` - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ CRM —Å—Ä–∞–∑—É

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

1. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª CRM ‚Üí –ö–ª–∏–µ–Ω—Ç—ã
3. –ù–∞–π–¥–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç–∞ –∏ –Ω–∞–∂–º–∏—Ç–µ "–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ HMS"
4. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ HMS ‚Üí –ü–∞—Ü–∏–µ–Ω—Ç—ã
5. **–ù–æ–≤—ã–π –ø–∞—Ü–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –±—É–¥—É—Ç –≤–∏–¥–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è:
```
üîÑ –ó–∞–ø—É—Å–∫ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–ª—è: patients
üîÑ –ó–∞–ø—É—â–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ HMS –ø–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞
üîÑ –ü–æ–ª—É—á–µ–Ω —Ç—Ä–∏–≥–≥–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç
–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞! –¢–µ–ø–µ—Ä—å –ø–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞ –∏–∑ CRM –≤ –ø–∞—Ü–∏–µ–Ω—Ç–∞ HMS, —Å–ø–∏—Å–æ–∫ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
